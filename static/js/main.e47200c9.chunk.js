(this["webpackJsonpweather-app"]=this["webpackJsonpweather-app"]||[]).push([[0],{239:function(e,t,a){e.exports=a(490)},244:function(e,t,a){},490:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(26),i=a.n(c),o=(a(244),a(34)),l=a(13),u=a(515),m=a(67),s=a.n(m),d=a(491),E=a(35),f=a(193),p=a.n(f),h=a(204),y=function(e){var t=e.children,a=Object(n.useRef)(null),c=Object(n.useState)(0),i=Object(E.a)(c,2),o=i[0],l=i[1];return Object(n.useEffect)((function(){return o||l(p()({THREE:h,el:a.current})),function(){o&&o.destroy()}}),[o]),r.a.createElement("div",{className:"full",ref:a},t)},v=a(2),b=a(23),w=function(e){return r.a.createElement(y,null,r.a.createElement(u.a,{container:!0,direction:"column",justify:"center",className:"full"},r.a.createElement("div",{className:"highlight"},r.a.createElement(u.a,{item:!0,container:!0,xs:12,justify:"center",alignItems:"center"},r.a.createElement(u.a,{item:!0},r.a.createElement(v.b.Provider,{value:{size:"6em"}},r.a.createElement(b.b,null))),r.a.createElement(u.a,{item:!0,container:!0,direction:"column",justify:"center",alignItems:"center"},r.a.createElement(d.a,{variant:"h4",color:"inherit"},"Weather App"),r.a.createElement(s.a,{color:"inherit","aria-label":"menu",component:o.b,to:"/main"},"Enter"))))),r.a.createElement(s.a,{to:"/main"}," Go to main "))},g=a(492),j=a(517),O=a(519),x=a(520),C=a(518),k=function(e){var t=e.children;return r.a.createElement(u.a,{container:!0,justify:"center"},r.a.createElement(j.a,{position:"static"},r.a.createElement(C.a,{variant:"dense"},r.a.createElement(O.a,{color:"inherit","aria-label":"menu"},r.a.createElement(x.a,{component:m.Link,to:"/main",color:"inherit","aria-label":"menu"},r.a.createElement(v.b.Provider,{value:{size:"2em"}},r.a.createElement(b.b,null)))),r.a.createElement(d.a,{variant:"h6",color:"inherit"},"Weather App"))),r.a.createElement(u.a,{item:!0,xs:12,sm:11,md:10,lg:8},t))},I=a(522),S=a(525),z=a(523),F=a(54),W=a.n(F),M=a(123),P=a(87),R=a(88),L=a.n(R),N=a(10),q=["clouds","clear","rain","snow","drizzle","thunderstorm"],A={clouds:b.a,clear:b.b,drizzle:b.d,snow:b.e,rain:b.c,thunderstorm:b.f},D=function(e){return function(e){var t=A[e];return r.a.createElement(t,null)}(e.state)},H=a(194),K=a.n(H),B=function(e,t){return"".concat(e,"-").concat(t)},T=function(e){return Number(K()(e).from("K").to("C").toFixed(0))},G=function(e,t,a){var n=e.data,r=B(t,a),c=T(n.main.temp),i=n.wind.speed,o=n.main.humidity,l=n.weather[0].main.toLowerCase(),u={temperature:c,state:q.includes(l)?l:null,wind:i,humidity:o};return Object(N.a)({},r,u)},J="a2a3072629512251e3858069addc6dd4",Y=function(e,t){return"".concat("http://api.openweathermap.org/data/2.5/weather","?q=").concat(e,",").concat(t,"&appid=").concat(J)},U=function(e,t){return"".concat("https://api.openweathermap.org/data/2.5/forecast","?q=").concat(e,",").concat(t,"&appid=").concat(J)},$=function(e){var t=Object(n.useState)({}),a=Object(E.a)(t,2),r=a[0],c=a[1],i=Object(n.useState)(null),o=Object(E.a)(i,2),l=o[0],u=o[1];return Object(n.useEffect)((function(){var t=function(){var e=Object(P.a)(W.a.mark((function e(t,a,n){var r,i,o,l,m,s;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Y(t,a),e.prev=1,e.next=4,L.a.get(r);case 4:i=e.sent,o=G(i,t,a,n),c((function(e){return Object(M.a)(Object(M.a)({},e),o)})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),e.t0.response?(l=e.t0.response,m=l.data,s=l.status,console.log("data :",m),console.log("status :",s),u("An error occurred in the server")):e.t0.request?(console.log("request doesnt arrive to server"),u("Server unreachable or maybe your device is offline")):(console.log("Unexpected error"),u("Error until loading data"));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,a,n){return e.apply(this,arguments)}}();e.forEach((function(e){var a=e.city,n=e.countryCode;t(a,n)}))}),[e]),{allWeather:r,error:l,setError:u}},Q=(a(312),function(e){var t=e.city,a=e.country;return r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a,{display:"inline",variant:"h4"},t,", "),r.a.createElement(d.a,{display:"inline",variant:"h5"},a))}),V=a(521),X=function(e){var t=e.temperature,a=e.state;return r.a.createElement(u.a,{container:!0,item:!0,direction:"row",justify:"center",alignItems:"center",spacing:1},r.a.createElement(v.b.Provider,{value:{size:"6em"}},a?r.a.createElement(D,{state:a&&a}):r.a.createElement(V.a,{variant:"circle",height:80,width:80})),t?r.a.createElement(d.a,{variant:"h2",display:"inline"},t):r.a.createElement(V.a,{variant:"rect",height:80,width:80}))},Z=function(e){var t=e.cities,a=e.onClickCity,n=$(t),c=n.allWeather,i=n.error,o=n.setError;return r.a.createElement("div",null,i&&r.a.createElement(z.a,{onClose:function(){return o(null)},severity:"error"},i),r.a.createElement(I.a,null,t.map((function(e){return(t=a,function(e,a){var n=e.city,c=e.country,i=e.countryCode;return r.a.createElement(S.a,{button:!0,key:B(n,i),onClick:function(){return t(n,i)}},r.a.createElement(u.a,{container:!0,justify:"center",alignItems:"center"},r.a.createElement(u.a,{item:!0,md:9,xs:12},r.a.createElement(Q,{city:n,country:c})),r.a.createElement(u.a,{item:!0,md:3,xs:12},r.a.createElement(X,{temperature:a&&a.temperature,state:a&&a.state}))))})(e,c[B(e.city,e.countryCode)]);var t}))))},_=[{city:"Madrid",country:"Espa\xf1a",countryCode:"ES"},{city:"Bogot\xe1",country:"Colombia",countryCode:"CO"},{city:"Avil\xe9s",country:"Espa\xf1a",countryCode:"ES"}],ee=function(){var e=Object(l.useHistory)();return r.a.createElement(k,null,r.a.createElement(g.a,{elevation:3},r.a.createElement(Z,{cities:_,onClickCity:function(t,a){e.push("/city/".concat(a,"/").concat(t))}})))},te=a(524),ae=a(126),ne=a(41),re=a.n(ne),ce=(a(148),function(e){return[0,1,2,3,4,5].map((function(e){return re()().add(e,"d")})).map((function(t){var a=e.list.filter((function(e){return re.a.unix(e.dt).dayOfYear()===t.dayOfYear()})).map((function(e){return e.main.temp}));return{dayHour:t.format("ddd"),min:T(Math.min.apply(Math,Object(ae.a)(a))),max:T(Math.max.apply(Math,Object(ae.a)(a))),hasTemps:a.length>0}})).filter((function(e){return e.hasTemps}))}),ie=function(e){var t=[4,8,12,16,20,24];return e.list.filter((function(e,a){return t.includes(a)})).map((function(e){return{hour:re.a.unix(e.dt).hour(),weekDay:re.a.unix(e.dt).format("dddd"),state:e.weather[0].main.toLowerCase(),temperature:T(e.main.temp)}}))},oe=function(){var e=Object(n.useState)(null),t=Object(E.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(null),i=Object(E.a)(c,2),o=i[0],u=i[1],m=Object(l.useParams)(),s=m.city,d=m.countryCode;return Object(n.useEffect)((function(){(function(){var e=Object(P.a)(W.a.mark((function e(){var t,a,n,c,i;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=U(s,d),e.prev=1,e.next=4,L.a.get(t);case 4:a=e.sent,n=a.data,c=ce(n),r(c),i=ie(n),u(i),e.next=14;break;case 12:e.prev=12,e.t0=e.catch(1);case 14:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(){return e.apply(this,arguments)}})()()}),[s,d]),{data:a,forecastItemList:o,city:s,countryCode:d}},le=a(27),ue=function(e){var t=e.data;return r.a.createElement(le.e,{width:"95%",height:250},r.a.createElement(le.d,{margin:{top:20,bottom:20,right:5,left:5},data:t},r.a.createElement(le.g,{dataKey:"dayHour"}),r.a.createElement(le.h,null),r.a.createElement(le.a,null),r.a.createElement(le.b,null),r.a.createElement(le.f,null),r.a.createElement(le.c,{type:"monotone",dataKey:"max",stroke:"#FF0000"}),r.a.createElement(le.c,{type:"monotone",dataKey:"min",stroke:"#0000FF"})))},me=function(e){var t=e.weekDay,a=e.hour,n=e.state,c=e.temperature;return r.a.createElement("div",null,r.a.createElement(u.a,{container:!0,direction:"column",justify:"center",alignItems:"center"},r.a.createElement(u.a,{item:!0},r.a.createElement(d.a,null,t)),r.a.createElement(u.a,{item:!0},r.a.createElement(d.a,null,a)),r.a.createElement(u.a,{item:!0},r.a.createElement(v.b.Provider,{value:{size:"5em"}},r.a.createElement(D,{state:n}))),r.a.createElement(u.a,{item:!0},r.a.createElement(d.a,null,c," \xba"))))},se=function(e){var t=e.list;return r.a.createElement(u.a,{container:!0,justify:"space-around",alignItems:"center"},t.map((function(e){return function(e){var t=e.weekDay,a=e.hour,n=e.state,c=e.temperature;return r.a.createElement(u.a,{item:!0,"data-testid":"forecast-item-container",key:"".concat(t).concat(a)},r.a.createElement(me,{weekDay:t,hour:a,state:n,temperature:c}))}(e)})))},de=function(e){var t=e.humidity,a=e.wind;return r.a.createElement("div",null,r.a.createElement(d.a,null,"humedad: ",t,"%"),r.a.createElement(d.a,null,"viento: ",a," km/h"))},Ee=function(){var e,t=oe(),a=t.data,c=t.forecastItemList,i=t.city,o=t.countryCode,l=(e=o,_.filter((function(t){return t.countryCode===e}))[0].country),m=Object(n.useMemo)((function(){return[{city:i,countryCode:o}]}),[i,o]),s=$(m).allWeather[B(i,o)],d=s&&s.temperature,E=s&&s.state,f=s&&s.wind,p=s&&s.humidity;return r.a.createElement(k,null,r.a.createElement(u.a,{container:!0,justify:"space-around",direction:"column",spacing:2},r.a.createElement(u.a,{container:!0,item:!0,xs:12,justify:"center",alignItems:"flex-end"},r.a.createElement(Q,{city:i,country:l})),r.a.createElement(u.a,{item:!0,container:!0,xs:12,justify:"center"},r.a.createElement(X,{temperature:d,state:E}),r.a.createElement(de,{wind:f,humidity:p})),r.a.createElement(u.a,null,!a&&!c&&r.a.createElement(te.a,null)),r.a.createElement(u.a,{item:!0,sm:12},a&&r.a.createElement(ue,{data:a})),r.a.createElement(u.a,{item:!0,sm:12},c&&r.a.createElement(se,{list:c}))))},fe=function(){return r.a.createElement("div",null,"Not Found Page",r.a.createElement("div",null,r.a.createElement(o.b,{to:"/main"},"Go to main")))},pe=function(){return r.a.createElement(o.a,null,r.a.createElement(l.Switch,null,r.a.createElement(l.Route,{exact:!0,path:"/"},r.a.createElement(w,null)),r.a.createElement(l.Route,{path:"/main"},r.a.createElement(ee,null)),r.a.createElement(l.Route,{path:"/city/:countryCode/:city"},r.a.createElement(Ee,null)),r.a.createElement(l.Route,null,r.a.createElement(fe,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(pe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[239,1,2]]]);
//# sourceMappingURL=main.e47200c9.chunk.js.map